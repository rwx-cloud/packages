- key: go-1-20
  call: golang/install 1.2.0
  with:
    go-version: "1.20"

- key: go-1-21
  call: golang/install 1.2.0
  with:
    go-version: "1.21"

- key: go-1-22
  call: golang/install 1.2.0
  with:
    go-version: "1.22"

- key: go-1-23
  call: golang/install 1.2.0
  with:
    go-version: "1.23"

- key: go-1-24
  call: golang/install 1.2.0
  with:
    go-version: "1.24"

- key: go-1-25
  call: golang/install 1.2.0
  with:
    go-version: "1.25"

- key: code-1-20
  run: |
    cat > go.mod << 'EOF'
    module test

    go 1.20

    require golang.org/x/text v0.21.0
    EOF
    cat > go.sum << 'EOF'
    golang.org/x/text v0.21.0 h1:L8rBOAiSsKbhCdtrCy+Yj8hCg8RypYCqPGfX89WFQY=
    golang.org/x/text v0.21.0/go.mod h1:4IBbMaMmOPCJ8SecivzSH54+73PCFmPWxNTLm+vZkEQ=
    EOF

- key: code-1-21
  run: |
    cat > go.mod << 'EOF'
    module test

    go 1.21

    require golang.org/x/text v0.21.0
    EOF
    cat > go.sum << 'EOF'
    golang.org/x/text v0.21.0 h1:L8rBOAiSsKbhCdtrCy+Yj8hCg8RypYCqPGfX89WFQY=
    golang.org/x/text v0.21.0/go.mod h1:4IBbMaMmOPCJ8SecivzSH54+73PCFmPWxNTLm+vZkEQ=
    EOF

- key: code-1-22
  run: |
    cat > go.mod << 'EOF'
    module test

    go 1.22

    require golang.org/x/text v0.21.0
    EOF
    cat > go.sum << 'EOF'
    golang.org/x/text v0.21.0 h1:L8rBOAiSsKbhCdtrCy+Yj8hCg8RypYCqPGfX89WFQY=
    golang.org/x/text v0.21.0/go.mod h1:4IBbMaMmOPCJ8SecivzSH54+73PCFmPWxNTLm+vZkEQ=
    EOF

- key: code-1-23
  run: |
    cat > go.mod << 'EOF'
    module test

    go 1.23

    require golang.org/x/text v0.21.0
    EOF
    cat > go.sum << 'EOF'
    golang.org/x/text v0.21.0 h1:L8rBOAiSsKbhCdtrCy+Yj8hCg8RypYCqPGfX89WFQY=
    golang.org/x/text v0.21.0/go.mod h1:4IBbMaMmOPCJ8SecivzSH54+73PCFmPWxNTLm+vZkEQ=
    EOF

- key: code-1-24
  run: |
    cat > go.mod << 'EOF'
    module test

    go 1.24

    require golang.org/x/text v0.21.0
    EOF
    cat > go.sum << 'EOF'
    golang.org/x/text v0.21.0 h1:L8rBOAiSsKbhCdtrCy+Yj8hCg8RypYCqPGfX89WFQY=
    golang.org/x/text v0.21.0/go.mod h1:4IBbMaMmOPCJ8SecivzSH54+73PCFmPWxNTLm+vZkEQ=
    EOF

- key: code-1-25
  run: |
    cat > go.mod << 'EOF'
    module test

    go 1.25

    require golang.org/x/text v0.21.0
    EOF
    cat > go.sum << 'EOF'
    golang.org/x/text v0.21.0 h1:L8rBOAiSsKbhCdtrCy+Yj8hCg8RypYCqPGfX89WFQY=
    golang.org/x/text v0.21.0/go.mod h1:4IBbMaMmOPCJ8SecivzSH54+73PCFmPWxNTLm+vZkEQ=
    EOF

- key: mod-download--test-go-1-20
  use: [go-1-20, code-1-20]
  call: $LEAF_DIGEST
  with:
    tool-cache: golang-mod-download-1-20

- key: mod-download--test-go-1-20--assert
  use: mod-download--test-go-1-20
  run: |
    test -d "$(go env GOMODCACHE)/golang.org/x/text@v0.21.0"

- key: mod-download--test-go-1-21
  use: [go-1-21, code-1-21]
  call: $LEAF_DIGEST
  with:
    tool-cache: golang-mod-download-1-21

- key: mod-download--test-go-1-21--assert
  use: mod-download--test-go-1-21
  run: |
    test -d "$(go env GOMODCACHE)/golang.org/x/text@v0.21.0"

- key: mod-download--test-go-1-22
  use: [go-1-22, code-1-22]
  call: $LEAF_DIGEST
  with:
    tool-cache: golang-mod-download-1-22

- key: mod-download--test-go-1-22--assert
  use: mod-download--test-go-1-22
  run: |
    test -d "$(go env GOMODCACHE)/golang.org/x/text@v0.21.0"

- key: mod-download--test-go-1-23
  use: [go-1-23, code-1-23]
  call: $LEAF_DIGEST
  with:
    tool-cache: golang-mod-download-1-23

- key: mod-download--test-go-1-23--assert
  use: mod-download--test-go-1-23
  run: |
    test -d "$(go env GOMODCACHE)/golang.org/x/text@v0.21.0"

- key: mod-download--test-go-1-24
  use: [go-1-24, code-1-24]
  call: $LEAF_DIGEST
  with:
    tool-cache: golang-mod-download-1-24

- key: mod-download--test-go-1-24--assert
  use: mod-download--test-go-1-24
  run: |
    test -d "$(go env GOMODCACHE)/golang.org/x/text@v0.21.0"

- key: mod-download--test-go-1-25
  use: [go-1-25, code-1-25]
  call: $LEAF_DIGEST
  with:
    tool-cache: golang-mod-download-1-25

- key: mod-download--test-go-1-25--assert
  use: mod-download--test-go-1-25
  run: |
    test -d "$(go env GOMODCACHE)/golang.org/x/text@v0.21.0"
